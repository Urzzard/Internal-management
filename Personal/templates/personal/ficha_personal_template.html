<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ficha Personal - {{personal.nombre}} {{personal.a_paterno}}</title>
    <style>
        body { font-family: sans-serif; margin: 20px; }
        h1, h2 { color: #333; border-bottom: 1px solid #ccc; padding-bottom: 5px;}
        .section { margin-bottom: 20px; }
        .label { font-weight: bold; display: inline-block; width: 150px; }
        .value { display: inline-block; }
        img { max-width: 200px; max-height: 200px; border: 1px solid #ddd; margin-top: 10px; }
    </style>
</head>
<body>
    <h1>Ficha Personal</h1>
    <div class="section">
        <h2>Datos Personales</h2>
        <p><span class="label">Nombre Completo:</span> <span class="value">{{ personal.nombre }} {{ personal.a_paterno }} {{ personal.a_materno }}</span></p>
        <p><span class="label">DNI:</span> <span class="value">{{ personal.dni }}</span></p>
        {% if dni_img_url %}
            <p><span class="label">Imagen DNI:</span></p>
            <img src="{{ dni_img_url }}" alt="DNI">
        {% endif %}
        <p><span class="label">Fecha Nacimiento:</span> <span class="value">{{ personal.f_nacimiento|date:"d/m/Y" }}</span></p>
        <p><span class="label">Edad:</span> <span class="value">{{ personal.edad }}</span></p>
        <p><span class="label">Email:</span> <span class="value">{{ personal.email }}</span></p>
        <p><span class="label">Celular:</span> <span class="value">{{ personal.celular }}</span></p>
        <p><span class="label">N° Emergencia:</span> <span class="value">{{ personal.nro_emergencia }}</span></p>
        <p><span class="label">Dirección:</span> <span class="value">{{ personal.direccion }}</span></p>
        <p><span class="label">Ubicación:</span> <span class="value">{{ personal.distrito }} / {{ personal.provincia }} / {{ personal.region }} / {{personal.pais.countryName}}</span></p> {# Idealmente tendrías los nombres aquí #}
        <p><span class="label">Sexo:</span> <span class="value">{{ personal.sexo }}</span></p>
        <p><span class="label">Estado Civil:</span> <span class="value">{{ personal.e_civil }}</span></p>
        <p><span class="label">Tallas:</span> <span class="value">Polo: {{ personal.t_polo }}, Pantalón: {{ personal.t_pantalon }}, Zapato: {{ personal.t_zapato }}</span></p>
        <p><span class="label">Cuentas:</span> <span class="value">Cta: {{ personal.cuenta_corriente }}, CCI: {{ personal.cci }}</span></p>
        <p><span class="label">Fecha Ingreso:</span> <span class="value">{{ personal.f_ingreso|date:"d/m/Y" }}</span></p>
        <p><span class="label">Estado Actual:</span> <span class="value">{{ personal.estado }}</span></p>
    </div>

    {% if pcampo %}
    <div class="section">
        <h2>Datos de Campo</h2>
        <p><span class="label">Gremio:</span> <span class="value">{{ pcampo.gremio.nombre | default:"N/A" }}</span></p>
        <p><span class="label">Rango:</span> <span class="value">{{ pcampo.rango.nombre | default:"N/A" }}</span></p>
        <p><span class="label">Estado RETCC:</span> <span class="value">{{ pcampo.retcc_estado }}</span></p>
         {% if retcc_img_url %}
            <p><span class="label">Imagen RETCC:</span></p>
            <img src="{{ retcc_img_url }}" alt="RETCC">
        {% endif %}

        {#{% if pcampo.gremio.nombre|lower|includes:"casa" %}#}
        {% if pcampo.gremio and 'casa' in pcampo.gremio.nombre|lower %}
            <h3>Datos Específicos (Casa)</h3>
            <p><span class="label">RUC:</span> <span class="value">{{ pcampo.ruc | default:"N/A" }}</span></p>
            <p><span class="label">Clave SOL:</span> <span class="value">{{ pcampo.c_sol | default:"N/A" }}</span></p>
            <p><span class="label">Recomendado por:</span> <span class="value">{{ pcampo.srecomendado.user.username | default:"N/A" }}</span></p>
        {% endif %}

        {#{% if pcampo.gremio.nombre|lower|includes:"sindicato" %}#}
        {% if pcampo.gremio and 'sindicato' in pcampo.gremio.nombre|lower %}
             <h3>Datos Específicos (Sindicato)</h3>
             {% if sdni_img_hijo_url %}
                <p><span class="label">Imagen DNI Hijo:</span></p>
                <img src="{{ sdni_img_hijo_url }}" alt="DNI Hijo">
             {% else %}
                 <p><span class="label">Imagen DNI Hijo:</span> <span class="value">No registrada</span></p>
             {% endif %}
        {% endif %}
    </div>
    {% endif %}

    {% if staff %}
    <div class="section">
        <h2>Datos de Staff</h2>
        <p><span class="label">Usuario Sistema:</span> <span class="value">{{ staff.user.username }}</span></p>
        <p><span class="label">Cargo:</span> <span class="value">{{ staff.cargo }}</span></p>
        <p><span class="label">Remuneración:</span> <span class="value">S/. {{ staff.rm }}</span></p>
    </div>
    {% endif %}

    <hr>
    <p style="font-size: 0.8em; text-align: center;">Documento generado el {% now "d/m/Y H:i" %}</p>
    <p style="font-size: 0.8em; text-align: center;">[Declaro que la información proporcionada es veraz y autorizo su tratamiento...]</p> {# Texto legal si aplica #}
</body>
</html>